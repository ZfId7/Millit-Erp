{% extends "base.html" %}

{% block title %}Manage Users{% endblock %}
{% block topbar %}ğŸ‘¤ User Management{% endblock %}

{% block content %}
<div class="form-wrapper">
  <h2 class="text-xl font-bold mb-4">Add New User</h2>
  <form method="POST" class="job-form">
    <div class="form-section">
      <div class="form-field">
        <label for="username">Username</label>
        <input type="text" name="username" required>
      </div>
      <div class="form-field">
        <label for="password">Password</label>
        <input type="password" name="password" required>
      </div>
      <div class="form-field">
        <label for="role">Role</label>
        <select name="role">
          <option value="employee">Employee</option>
          <option value="admin">Admin</option>
        </select>
      </div>
    </div>
    <div class="form-actions">
      <button type="submit">â• Create User</button>
    </div>
  </form>
</div>

<hr class="my-8">

<h2 class="text-xl font-bold mb-4">Current Users</h2>
<table class="w-full table-auto">
  <thead>
    <tr class="text-left text-zinc-400">
      <th class="pb-2">ID</th>
      <th class="pb-2">Username</th>
      <th class="pb-2">Role</th>
      <th class="pb-2">Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr class="border-t border-zinc-700">
      <td class="py-2">{{ user.id }}</td>
      <td class="py-2">{{ user.username }}</td>
      <td class="py-2">{{ user.role }}</td>
      <td class="py-2">
        <form method="POST" action="{{ url_for('admin_users_bp.edit_user', user_id=user.id) }}" class="inline-block mr-2">
          <input type="text" name="role" placeholder="New Role" class="px-1 py-0.5 text-xs w-20">
          <input type="password" name="password" placeholder="New Password" class="px-1 py-0.5 text-xs w-24">
          <button type="submit" class="text-yellow-400 hover:underline text-xs ml-1">âœï¸ Edit</button>
        </form>
        <form method="POST" action="{{ url_for('admin_users_bp.delete_user', user_id=user.id) }}" class="inline-block">
          <button type="submit" class="text-red-400 hover:underline text-xs">ğŸ—‘ï¸ Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
